<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.3.2 Scripted Data Connection Installation :: Fraud Detection Workshop</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/rhods-fd-workshop/rhods-fd-workshop/1-03-02-data-connections-script.html">
    <link rel="prev" href="1-03-01-data-connections-manual.html">
    <link rel="next" href="1-04-enable-pipelines.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/RHDLogo.svg" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/rhods-fd-workshop">Fraud Detection Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhods-fd-workshop" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">1. Projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-01-dashboard.html">1. The Dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-02-project-setup.html">2. Data Science Projects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="1-03-data-connections.html">3. Storage Data Connections</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="1-03-01-data-connections-manual.html">1. Manual</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="1-03-02-data-connections-script.html">2. Scripted Local</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1-04-enable-pipelines.html">4. Enable Pipelines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2. Workbenches</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-01-create-workbench.html">1. Create a Workbench</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-02-jupyter-env.html">2. Jupyter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-03-notebooks.html">3. Notebooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2-04-fraud-detection.html">4. Fraud Detection</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">3. Model Serving</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3-01-save-model.html">1. Saving the Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3-02-deploy-model.html">2. Deploy the Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3-03-model-api.html">3. Using the API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">4. Data Science Pipelines</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="4-01-elyra-pipelines.html">1. Elyra Pipeline Editor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="4-02-code-sdk-pipelines.html">2. KFP Tekton SDK Pipelines</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Fraud Detection Workshop</a></li>
    <li>1. Projects</li>
    <li><a href="1-03-data-connections.html">3. Storage Data Connections</a></li>
    <li><a href="1-03-02-data-connections-script.html">2. Scripted Local</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/cfchase/rhods-fd-workshop/edit/master/documentation/modules/ROOT/pages/1-03-02-data-connections-script.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">1.3.2 Scripted Data Connection Installation</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="index.html" class="xref page">Back to the introduction</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This script will install two data connections and two Minio buckets as s3 compatible storage into your data science project for convenience.  These are <strong>not</strong> meant for production usage.  It is based on the instructions for installing Minio in this <a href="https://ai-on-openshift.io/tools-and-applications/minio/minio/">guide</a>. It will create a random user and password for security.  If you wish to connect to your own storage, please refer to these instructions: <a href="1-03-01-data-connections-manual.html" class="xref page">Manually Adding Data Connections</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_finding_the_openshift_project_name"><a class="anchor" href="#_finding_the_openshift_project_name"></a>Finding the OpenShift Project Name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;re going to want to update the project we created in the previous section.  To do that, we need to navigate to the project in the OpenShift Console.  First, we must take note of the project resource name when we created it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/projects/ds-project-new-form-resource.png" alt="New Project Form Resource Name">
</div>
</div>
<div class="paragraph">
<p>You can also find the resource name on your list of projects by hovering over the <strong>?</strong> icon next to the project name.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/projects/ds-project-list-resource-hover.png" alt="Project List Resource Name">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_navigate_to_the_openshift_project"><a class="anchor" href="#_navigate_to_the_openshift_project"></a>Navigate to the OpenShift Project</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section details how to start an OpenShift job to install the s3 compatible storage and associated data connection secrets.  If you are knowledgeable in OpenShift and can access the cluster from the command line, you can simply execute <code>oc apply -n &lt;your-project-name/&gt; -f <a href="https://github.com/cfchase/rhods-fd-setup/blob/main/generated/setup-s3-job.yaml" class="bare">https://github.com/cfchase/rhods-fd-setup/blob/main/generated/setup-s3-job.yaml</a></code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now that we have the resource name, we can navigate to the project in the OpenShift Console.  Click on the <strong>OpenShift Console</strong> link in the application switcher top right corner of the OpenShift Web Console.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/projects/ds-project-ocp-link.png" alt="OpenShift Console Link">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>+</strong> icon in the navbar to create new resources.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/projects/ocp-console-add-icon.png" alt="Add Resources Icon">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select your project from the list of projects and verify the correct project is now listed.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/projects/ocp-console-select-project.png" alt="Select Project">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/projects/ocp-console-project-selected.png" alt="Project Selected">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: demo-setup
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: demo-setup-edit
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: edit
subjects:
  - kind: ServiceAccount
    name: demo-setup
---
apiVersion: batch/v1
kind: Job
metadata:
  name: create-s3-storage
spec:
  selector: {}
  template:
    spec:
      containers:
        - args:
            - -ec
            - |-
              echo -n 'Setting up Minio instance and data connections'
              oc apply -f https://raw.githubusercontent.com/cfchase/rhods-fd-setup/main/generated/setup-s3-no-sa.yaml
          command:
            - /bin/bash
          image: image-registry.openshift-image-registry.svc:5000/openshift/tools:latest
          imagePullPolicy: IfNotPresent
          name: create-s3-storage
      restartPolicy: Never
      serviceAccount: demo-setup
      serviceAccountName: demo-setup</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_connections"><a class="anchor" href="#_data_connections"></a>Data Connections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will be using S3 compatible object storage, such as Ceph, Minio, or AWS S3, to store the data and models used in this workshop. To access the data and models, we will use a Data Connection, which is a resource that contains the configuration parameters required to connect to an object storage bucket.</p>
</div>
<div class="paragraph">
<p>We will need 2 buckets.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>My Storage</strong> - Personal use for models and data.  We can reuse that bucket and connection for notebooks and model servers.</p>
</li>
<li>
<p><strong>Pipelines Artifacts</strong> - This is used as storage for your pipeline artifacts and required when creating a pipeline server.  We&#8217;ll keep it separate from the first bucket for clarity.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can choose to use your own object storage and learn how to configure it manually</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="1-03-01-data-connections-manual.html">1. Manual</a></span>
  <span class="next"><a href="1-04-enable-pipelines.html">4. Enable Pipelines</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
